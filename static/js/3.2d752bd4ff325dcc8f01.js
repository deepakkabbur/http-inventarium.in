webpackJsonp([3],{235:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(304),s=a(372),i=a(26),r=i(n.a,s.a,!1,null,null,null);e.default=r.exports},253:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"a",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"c",function(){return r});var n=function(){return a.e(55).then(a.bind(null,258))},s=function(){return a.e(44).then(a.bind(null,260))},i=function(){return a.e(50).then(a.bind(null,261))},r=function(){return a.e(48).then(a.bind(null,262))}},255:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a(1),s=function(){var t=document.querySelectorAll(".mdl-textfield");n.a.nextTick(function(){Array.prototype.forEach.call(t,function(t){t.MaterialTextfield&&t.MaterialTextfield.checkDirty()})})}},304:function(t,e,a){"use strict";var n=a(27),s=a.n(n),i=a(253),r=a(15),l=a(255);e.a={name:"procurement-invoice",props:{procurement:{type:Object,required:!0}},components:{TransactionView:i.d},watch:{procurement:function(t){this.lineItems=t.line_items,this.client=t.client,this.params.procurement=t.id},amount:function(t){this.calculatePendingAmpount()},totalAmount:function(){this.calculatePendingAmpount()},lineItems:{deep:!0,handler:function(t,e){this.calculateTotal()}}},updated:function(){window.componentHandler.upgradeAllRegistered(),Object(l.a)()},computed:{lineItems:{get:function(){return this.params.line_items||[]},set:function(t){var e=this;t.forEach(function(t){e.params.line_items.push({label:t.label,price:t.price,quantity:0,product:t.product,total_quantity:t.quantity})})}},client:{get:function(){return this.procurement.client||{}},set:function(t){this.params.name=t.name,this.params.gst_number=t.gst_number,this.params.address=t.address_line_1}},transactionParams:{get:function(){return this.params.transactions},set:function(t){this.$set(this.params,"transactions",t)}},sgstAmount:function(){return this.total*this.params.sgst_percentage/100},cgstAmount:function(){return this.total*this.params.cgst_percentage/100},totalAmount:function(){return this.total+this.sgstAmount+this.cgstAmount}},methods:s()({},Object(r.b)(["createSalesOrder"]),{calculatePendingAmpount:function(){this.params.pending_amount>0?this.pendingAmount-=this.amount:this.pendingAmount=this.totalAmount-this.amount},calculateTotal:function(){var t=this;this.total=0,this.lineItems.forEach(function(e){t.total+=e.price*e.quantity})},generateValidationRule:function(t){return"required|integer|min_value:1|max_value:"+t},proceed:function(){var t=this;this.$refs.transaction.valid().then(function(e){if(e)return t.$validator.validateAll()}).then(function(e){e&&t.createSalesOrder(t.params).then(function(e){t.$emit("orderComplete"),t.$toastr.s("Success")}).catch(function(e){t.$toastr.e(e)})})}}),data:function(){return{params:{procurement:"",line_items:[],sgst_percentage:0,cgst_percentage:0,transactions:[],pending_amount:0,name:"",address:"",gst_number:""},amount:0,pendingAmount:0,total:0}}}},372:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdl-grid order procurement"},[a("div",{staticClass:"mdl-cell--12-col-desktop\tmdl-cell--4-col-phone"},[a("h4",{staticClass:"text-center"},[t._v("Invoice")]),t._v(" "),a("table",{staticClass:"mdl-data-table mdl-js-data-table"},[t._m(0),t._v(" "),a("tbody",t._l(t.lineItems,function(e){return a("tr",{key:e.product},[a("td",[t._v(t._s(e.label))]),t._v(" "),a("td",[t._v(t._s(e.price))]),t._v(" "),a("td",[a("div",[a("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label",class:{errors:t.errors.has(e.label)}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:t.generateValidationRule(e.total_quantity),expression:"generateValidationRule(item.total_quantity)"},{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"mdl-textfield__input",attrs:{name:e.label,id:e.label},domProps:{value:e.quantity},on:{input:function(a){a.target.composing||t.$set(e,"quantity",a.target.value)}}}),t._v(" "),a("label",{staticClass:"mdl-textfield__label",attrs:{for:"name"}},[t._v("QTY")]),t._v(" "),a("span",{staticClass:"mdl-textfield__error"},[t._v(t._s(t.errors.first(e.label)))])])])]),t._v(" "),a("td",[t._v(t._s(e.total_quantity))]),t._v(" "),a("td",[t._v(t._s(e.price*e.quantity))])])}))])]),t._v(" "),a("div",{staticClass:"mdl-cell--8-col-desktop\tmdl-cell--4-col-phone"},[a("transaction-view",{ref:"transaction",attrs:{transactions:t.params.transactions,client:t.client},on:{selectedTransaction:function(e){t.transactionParams=e},amountEntered:function(e){t.amount=e}}})],1),t._v(" "),a("div",{staticClass:"mdl-cell--4-col-desktop\tmdl-cell--4-col-phone"},[a("div",{staticClass:"md-list"},[a("div",{staticClass:"mdl-list__item"},[a("div",{staticClass:"mdl-list__item-primary-content"},[t._v("\n          Amount\n        ")]),t._v(" "),a("div",{staticClass:"mdl-list__item-secondary-content"},[t._v("\n          "+t._s(t.total)+"\n        ")])]),t._v(" "),a("div",{staticClass:"mdl-list__item"},[a("span",{staticClass:"mdl-list__item-primary-content"},[a("div",[a("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label",class:{errors:t.errors.has("sgst_percentage")}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"},{name:"model",rawName:"v-model",value:t.params.sgst_percentage,expression:"params.sgst_percentage"}],staticClass:"mdl-textfield__input",attrs:{name:"sgst_percentage",id:"sgst_percentage"},domProps:{value:t.params.sgst_percentage},on:{input:function(e){e.target.composing||t.$set(t.params,"sgst_percentage",e.target.value)}}}),t._v(" "),a("label",{staticClass:"mdl-textfield__label",attrs:{for:"sgst_percentage"}},[t._v("SGST")]),t._v(" "),a("span",{staticClass:"mdl-textfield__error"},[t._v(t._s(t.errors.first("sgst_percentage")))])])])]),t._v(" "),a("span",{staticClass:"mdl-list__item-secondary-content"},[t._v("\n          "+t._s(t.sgstAmount)+"\n        ")])]),t._v(" "),a("div",{staticClass:"mdl-list__item"},[a("div",{staticClass:"mdl-list__item-primary-content"},[a("div",{staticClass:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label",class:{errors:t.errors.has("cgst_percentage")}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"},{name:"model",rawName:"v-model",value:t.params.cgst_percentage,expression:"params.cgst_percentage"}],staticClass:"mdl-textfield__input",attrs:{name:"cgst_percentage",id:"cgst_percentage"},domProps:{value:t.params.cgst_percentage},on:{input:function(e){e.target.composing||t.$set(t.params,"cgst_percentage",e.target.value)}}}),t._v(" "),a("label",{staticClass:"mdl-textfield__label",attrs:{for:"cgst_percentage"}},[t._v("CGST")]),t._v(" "),a("span",{staticClass:"mdl-textfield__error"},[t._v(t._s(t.errors.first("cgst_percentage")))])])]),t._v(" "),a("div",{staticClass:"mdl-list__item-secondary-content"},[t._v("\n          "+t._s(t.cgstAmount)+"\n        ")])]),t._v(" "),a("div",{staticClass:"mdl-list__item"},[a("span",{staticClass:"mdl-list__item-primary-content"},[t._v("\n          Pending Amount\n        ")]),t._v(" "),a("span",{staticClass:"mdl-list__item-secondary-content"},[t._v("\n          "+t._s(t.pendingAmount)+"\n        ")])]),t._v(" "),a("div",{staticClass:"mdl-list__item"},[a("span",{staticClass:"mdl-list__item-primary-content"},[t._v("\n          Total Amount\n        ")]),t._v(" "),a("span",{staticClass:"mdl-list__item-secondary-content"},[t._v("\n          "+t._s(t.totalAmount)+"\n        ")])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Product")]),t._v(" "),a("th",[t._v("Price")]),t._v(" "),a("th",[t._v("Quantity")]),t._v(" "),a("th",[t._v("Total Order Quantity")]),t._v(" "),a("th",[t._v("Amount")])])])}],i={render:n,staticRenderFns:s};e.a=i}});
//# sourceMappingURL=3.2d752bd4ff325dcc8f01.js.map